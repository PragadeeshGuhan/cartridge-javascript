# Cartridge JavaScript [![Build Status](https://travis-ci.org/cartridge/cartridge-javascript.svg?branch=master)](https://travis-ci.org/cartridge/cartridge-javascript)

> JavaScript expansion pack for [Cartridge](https://github.com/cartridge/cartridge)

To use this module, you will need [cartridge-cli](https://github.com/cartridge/cartridge-cli) installed and have a cartridge project setup.

```sh
npm install cartridge-javascript --save-dev
```

This module adds the following to a project:

* JavaScript [concatenation](https://github.com/contra/gulp-concat) and [minification](https://github.com/terinjokes/gulp-uglify)
* JavaScript transpiling using [Babel](https://babeljs.io/) (allowing use ES2015 etc features)
* JavaScript [sourcemaps](https://github.com/floridoo/gulp-sourcemaps)
* JavaScript linting using [gulp-jshint](https://github.com/spalger/gulp-jshint)
* JavaScript documentation generation using [gulp-jsdoc3](https://github.com/mlucool/gulp-jsdoc3)

## Maintainers

| Name          |                   
| ------------- |
| [Daniel Furze](https://github.com/furzeface)  
| [Tristan Ashley](https://github.com/tawashley)

## Config

Once installed, the config file `task.scripts.js` is created and stored in the `_config` directory in the root of your cartridge project.

Multiple files can be independently managed using the `files` object, allowing separate files to be compiled e.g. `vendor.js` and `bundle.js`.

Each key represents the name of the output file (a key of `bundle` will make the output file of `bundle.js`) with the `src` array specifying what files are to be included. The option `generateDocs` can be set to `false` to turn off generating documentation if this is not needed e.g working with 3rd party libraries.

Any example of a two file setup is included in the base config file when the module is installed.

### Enabling babel

Babel support is opt-in by default - setting `config.useBabel` to `true` will set all source files to be transpiled using [Babel](https://babeljs.io/ "Babel Homepage") before concatination.

Setting the above option to `true` may also require the JSHint option [esversion](http://jshint.com/docs/options/#esversion) to be set to version `6` in the config file.

## Usage

This module provides the following gulp tasks, which are generated based on the config.

* `gulp scripts` - Task that runs all of the tasks mentioned below.
* `gulp scripts:bundle:<filename>` - Concatenates all JS files into one file. When the `--prod` is provided the concatenated file is also minified. Sourcemaps are generated by default if no `--prod` flag is provided.
* `gulp scripts:lint:<filename>` - Lints all JS files. Ignored if `--prod` is provided.
* `gulp scripts:docs:<filename>` - Generates JS docs, for when [JSDocs](http://usejsdoc.org/) are used in source file. If this config key `generateDocs` is set to false, this task is not set.

For the examples above, replace `<filename>` with the key in the `files` objects in the config file e.g. With the name of `main` you would run `gulp scripts:bundle:main`

* * *

## Development
### Commit message standards [![Commitizen friendly](https://img.shields.io/badge/commitizen-friendly-brightgreen.svg)](http://commitizen.github.io/cz-cli/)
Try and adhere as closely as possible to the [Angular commit messages guidelines](https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#-git-commit-guidelines).

[Commitizen](https://github.com/commitizen/cz-cli) is a command line tool which can help with this:
```sh
npm install -g commitizen
```
Now, simply use `git cz` instead of `git commit` when committing.
